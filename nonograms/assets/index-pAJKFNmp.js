(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const t of i)if(t.type==="childList")for(const r of t.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const t={};return i.integrity&&(t.integrity=i.integrity),i.referrerPolicy&&(t.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?t.credentials="include":i.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function s(i){if(i.ep)return;i.ep=!0;const t=n(i);fetch(i.href,t)}})();const G=`<div class="container">
<header class="header">
  <div class="header__container">
    <h1 class="header__container__title">
      Nonograms<span class="header__title_small"> by <a href="https://github.com/40iq" class="header__title_link" target="_blank">40iq</a></span>
    </h1>
  </div>
</header>
<main class="main">
  <div class="main__container"></div>
</main>
<footer class="footer">
  <div class="footer__container">
    <a href="https://github.com/40iq" class="footer__link footer__link_git" target="_blank">GitHub: 40iq</a
    ><span class="footer__container_date">Jan 2024</span
    ><a href="https://rs.school/" class="footer__link footer__link_rss" target="_blank">RS-school</a>
  </div>
</footer>
</div>
`,L=10,y={selectedDiff:"easy",selectedLevel:"level_11"};function M(o,e){const n=Array.from(o).sort((i,t)=>i[0]===t[0]?i[1]-t[1]:i[0]-t[0]),s=Array.from(e).sort((i,t)=>i[0]===t[0]?i[1]-t[1]:i[0]-t[0]);return n.join("")===s.join("")}function P(o,e,n){const s=o.childNodes,i=e.childNodes,t=[].concat(n.rowsHints),r=[].concat(n.colHints);for(let c=s.length-1;c>=0;c-=1){const u=s[c].childNodes;for(let l=0;l<u.length;l+=1)t[l].length>0&&(u[l].textContent=t[l][t[l].length-1],t[l].pop())}for(let c=i.length-1;c>=0;c-=1){const u=i[c].childNodes;for(let l=0;l<u.length;l+=1)r[l].length>0&&(u[l].textContent=r[l][r[l].length-1],r[l].pop())}}function a(o,e=void 0,n=void 0,s=void 0,i=void 0,t=void 0,r=void 0){const c=document.createElement(o);return e!==void 0&&e.forEach(u=>{c.classList.add(u)}),n!==void 0&&(c.textContent=n),s!==void 0&&c.setAttribute("type",s),i!==void 0&&c.setAttribute("id",i),t!==void 0&&c.setAttribute("name",t),r!==void 0&&(c.checked=!0),c}function C(o=void 0,e=0,n=void 0,s=0,i){if(!i)return;const t=o.split(" "),r=t[0],c=`${t[1]}_${e}`,u=n.split(" "),l=u[0],m=u[1],d=a("div",[r,c]);for(let p=0;p<i;p+=1){const g=a("div",[l,`${m}-${s+p}`]);d.append(g)}return d}function D(o){const e=JSON.parse(JSON.stringify(o));for(let t=0;t<e.length;t+=1){for(let r=0;r<e[t].length;r+=1)e[t][r]===0&&(e[t][r]=" "),e[t][r]===" "&&e[t][r-1]===" "&&(e[t][r-1]="");e[t]=e[t].join("").trim().split(" ").map(r=>r.length)}const n=e.map(t=>t.length).reduce((t,r)=>r>t?t=r:t,0),s=[];for(let t=0;t<o[0].length;t+=1){s[t]=[];for(let r=0;r<o.length;r+=1)s[t].push(o[r][t])}for(let t=0;t<s.length;t+=1){let r=s[t];for(let c=0;c<r.length;c+=1)r[c]===0&&(r[c]=" "),r[c]===" "&&(r[c-1]===" "||r[c-1]==="")&&(r[c-1]="");s[t]=r.join("").trim().split(" ").map(c=>c.length)}const i=s.map(t=>t.length).reduce((t,r)=>r>t?t=r:t,0);return{rowsHints:s,colHints:e,rowLength:i,colLength:n}}function v(o,e,n){const s=Array.from(o),i=[];return i.push(Number(e.getAttribute("data-row"))),i.push(Number(e.getAttribute("data-col"))),n?(s.push(i),s):s.filter(t=>!(t[0]===i[0]&&t[1]===i[1]))}function b(o,e,n){const s=e;return n==="paint"?(o.classList.add("painted"),o.classList.remove("crossed"),s.paintedCells=v(s.paintedCells,o,"add"),s.crossedCells=v(s.crossedCells,o),s):(o.classList.add("crossed"),o.classList.remove("painted"),s.crossedCells=v(s.crossedCells,o,"add"),s.paintedCells=v(s.paintedCells,o),s)}function w(o,e,n){const s=e;return n==="unpaint"?(o.classList.remove("painted"),s.paintedCells=v(s.paintedCells,o),s):(o.classList.remove("crossed"),s.crossedCells=v(s.crossedCells,o),s)}class O{constructor(e){this.DOMcontroller=e,this.node,this.generateMenuBurger()}generateMenuBurger(){const e=a("div",["game__burger-wrapper"]);e.addEventListener("click",c=>{c.target.classList.contains("game__burger")||c.target.classList.contains("burger__button")||e.classList.remove("burger_active")});const n=a("div",["game__burger"]),s=a("button",["burger__button","burger__button_save"],"Save");s.addEventListener("click",()=>{this.DOMcontroller.parent.autoSave(),this.DOMcontroller.mainPage.checkAutoSave()});const i=a("button",["burger__button","burger__button_reset"],"Reset"),t=a("button",["burger__button","burger__button_solution"],"Solution"),r=a("button",["burger__button","burger__button_main-menu"],"Main menu");return r.addEventListener("click",()=>{e.classList.remove("burger_active"),this.DOMcontroller.showMainMenuPage(),this.DOMcontroller.gamePage.timer.stopTimer()}),i.addEventListener("click",()=>{this.DOMcontroller.resetGameProgress(),e.classList.remove("burger_active")}),t.addEventListener("click",()=>{this.DOMcontroller.showSolution(),e.classList.remove("burger_active")}),n.append(s,i,t,r),e.append(n),this.node=e,this}}class N{constructor(e){this.gamePage=e,this.DOMcontroller=e.parent,this.generateModal()}generateModal(){const e=a("div",["game__modal-wrapper"]),n=a("div",["game__modal"]);e.addEventListener("click",d=>{d.target.classList.contains("game__modal-wrapper")&&n.classList.toggle("game__modal_hidden")});const s=a("h3",["modal__title"],"Great!");this.TitleNode=s;const i=a("p",["modal__description","modal__description_nonogram"],"Solved nonogram:"),t=a("span",["description","description_nonogram"]);i.append(t),this.nonogramDescriptionNode=t;const r=a("p",["modal__description","modal__description_time"],"Time:"),c=a("span",["description","description_time"]);r.append(c),this.timeDescriptionNode=c;const u=a("div",["modal__buttons-container"]),l=a("button",["modal__button","modal__button_hide"],"Hide");l.addEventListener("click",()=>{n.classList.toggle("game__modal_hidden")});const m=a("button",["modal__button","modal__button_menu"],"Back to Menu");return m.addEventListener("click",()=>{e.classList.remove("modal_active"),n.classList.remove("game__modal_hidden"),this.DOMcontroller.state.currentGameState=void 0;const d=JSON.parse(localStorage.getItem("40iqDataBase"));d.currentGameSave=void 0,localStorage.setItem("40iqDataBase",JSON.stringify(d)),this.DOMcontroller.mainPage.checkAutoSave(),this.DOMcontroller.showMainMenuPage(),this.gamePage.timerNode.textContent="00:00"}),u.append(l,m),n.append(s,i,r,u),e.append(n),this.node=e,this}}function k(o,e){let n=o,s=e;return o<10&&(n="0"+o),e<10&&(s="0"+e),`${n}:${s}`}class T{constructor(e,n,s="00:00"){this.gamePageObject=e,this.isStarted=!1,this.currentValue=s,this.currentSeconds=Number(this.currentValue.split(":")[1]),this.currentMinutes=Number(this.currentValue.split(":")[0]),this.timerNode=n}startTimer(){return this.timerId=setInterval(()=>{this.currentSeconds+=1,this.currentSeconds>=60&&(this.currentSeconds=0,this.currentMinutes+=1),this.currentValue=k(this.currentMinutes,this.currentSeconds),this.timerNode.textContent=this.currentValue,this.gamePageObject.parent.state.currentGameState.currentTimerValue=this.currentValue},1e3),this}pauseTimer(){if(this.isStarted)return clearInterval(this.timerId),this.isPaused=!0,this}resumeTimer(){if(this.isStarted)return this.startTimer(),this.isPaused=!1,this}stopTimer(){clearInterval(this.timerId),this.currentValue="00:00",this.currentMinutes=0,this.currentSeconds=0,this.isStarted=!1,this.isPaused=!1}loadTimer(){this.currentValue=this.gamePageObject.parent.state.currentGameState.currentTimerValue?this.gamePageObject.parent.state.currentGameState.currentTimerValue:"00:00",this.currentSeconds=Number(this.currentValue.split(":")[1]),this.currentMinutes=Number(this.currentValue.split(":")[0]),this.timerNode.textContent=this.currentValue}}class x{constructor(e){this.parent=e,this.burger=new O(this.parent),this.modal=new N(this),this.renderGameLayout(),this.timer=new T(this,this.timerNode),this.isMouseDown=!1,this.mode="paint"}renderGameLayout(){const e=a("div",["game"]),n=this.burger.node,s=a("button",["game__button-menu"],"Menu");s.addEventListener("click",()=>{if(n.classList.contains("burger_active")){n.classList.remove("burger_active");return}n.classList.add("burger_active")});const i=this.modal.node,t=a("div",["game__header"]),r=a("span",["game__timer"],"00:00");t.append(r,s),this.timerNode=r,s.addEventListener("click",()=>{if(this.timer.isPaused){this.timer.resumeTimer();return}this.timer.pauseTimer()}),n.addEventListener("click",()=>{if(this.timer.isPaused){this.timer.resumeTimer();return}});const c=a("div",["game__field-container"]),u=a("div",["game__field"]),l=a("div",["game__field_top"]),m=a("div",["game__result-window"]),d=a("div",["game__hints","game__hints_rows"]);l.append(m,d);const p=a("div",["game__field_bottom"]),g=a("div",["game__hints","game__hints_cols"]),f=a("div",["game__cells-container"]);return f.addEventListener("mouseleave",()=>{this.isMouseDown=!1,this.parent.state.currentGameState.paintedCells.length===this.parent.state.currentGameState.cellsToPaint.length&&M(this.parent.state.currentGameState.paintedCells,this.parent.state.currentGameState.cellsToPaint)&&(this.timer.stopTimer(),this.parent.parent.gameOver())}),f.addEventListener("contextmenu",_=>{_.preventDefault()}),f.addEventListener("mousedown",_=>{if(!this.parent.state.currentGameState.isGameOver){if(_.button===0)this.mode="paint",_.target.classList.contains("painted")&&(this.mode="unpaint");else if(_.button===2)this.mode="cross",_.target.classList.contains("crossed")&&(this.mode="uncross");else return;this.isMouseDown=!0,this.timer.isStarted||(this.timer.isStarted=!0,this.timer.startTimer())}}),f.addEventListener("mouseup",_=>{if(this.parent.state.currentGameState.isGameOver||!this.isMouseDown)return;const h=_.target;h.classList.contains("cell")&&!h.classList.contains("painted")&&this.mode==="paint"&&(this.parent.parent.audio.playPaintSound(),this.parent.state.currentGameState=b(h,this.parent.state.currentGameState,"paint")),h.classList.contains("cell")&&h.classList.contains("painted")&&this.mode==="unpaint"&&(this.parent.parent.audio.playUnpaintSound(),this.parent.state.currentGameState=w(h,this.parent.state.currentGameState,"unpaint")),h.classList.contains("cell")&&!h.classList.contains("crossed")&&this.mode==="cross"&&(this.parent.parent.audio.playCrossSound(),this.parent.state.currentGameState=b(h,this.parent.state.currentGameState,"cross")),h.classList.contains("cell")&&h.classList.contains("crossed")&&this.mode==="uncross"&&(this.parent.parent.audio.playUnpaintSound(),this.parent.state.currentGameState=w(h,this.parent.state.currentGameState,"uncross")),this.parent.state.currentGameState.paintedCells.length===this.parent.state.currentGameState.cellsToPaint.length&&M(this.parent.state.currentGameState.paintedCells,this.parent.state.currentGameState.cellsToPaint)&&(this.timer.stopTimer(),this.parent.parent.gameOver()),this.isMouseDown=!1}),f.addEventListener("mousemove",_=>{if(this.parent.state.currentGameState.isGameOver)return;const h=_.target;this.isMouseDown&&(h.classList.contains("cell")&&!h.classList.contains("painted")&&this.mode==="paint"&&(this.parent.parent.audio.playPaintSound(),this.parent.state.currentGameState=b(h,this.parent.state.currentGameState,"paint")),h.classList.contains("cell")&&h.classList.contains("painted")&&this.mode==="unpaint"&&(this.parent.parent.audio.playUnpaintSound(),this.parent.state.currentGameState=w(h,this.parent.state.currentGameState,"unpaint")),h.classList.contains("cell")&&!h.classList.contains("crossed")&&this.mode==="cross"&&(this.parent.parent.audio.playCrossSound(),this.parent.state.currentGameState=b(h,this.parent.state.currentGameState,"cross")),h.classList.contains("cell")&&h.classList.contains("crossed")&&this.mode==="uncross"&&(this.parent.parent.audio.playUnpaintSound(),this.parent.state.currentGameState=w(h,this.parent.state.currentGameState,"uncross")))}),this.cellsContainer=f,this.hintsRows=d,this.hintsCols=g,p.append(g,f),u.append(l,p),c.append(u),e.append(i,n,t,c),this.node=e,this}createCells(e){this.cellsContainer.innerHTML="";let n;switch(e){case"easy":n=5;break;case"medium":n=10;break;default:n=15;break}for(let s=0;s<n;s+=1){const i=a("div",["row",`row_${s}`]);for(let t=0;t<n;t+=1){const r=a("div",["cell",`cell_${s*n+t}`]);r.setAttribute("data-row",s),r.setAttribute("data-col",t),i.append(r)}this.cellsContainer.append(i)}return this}updateHints(e){const n=D(e),s=this.hintsRows;s.innerHTML="";for(let r=0;r<n.rowLength;r+=1){const c=C("hints__row hints__row",r,"hints__cell_row hints__cell_row",0,e.length);s.append(c)}const i=this.hintsCols;i.innerHTML="";for(let r=0;r<n.colLength;r+=1){const c=C("hints__col hints__col",r,"hints__cell_col hints__cell_col",0,e.length);i.append(c)}const t=JSON.parse(JSON.stringify(n));P(s,i,t)}}class E{constructor(e){this.parent=e,this.node,this.continueButton,this.renderMainMenuLayout()}renderMainMenuLayout(){const e=a("div",["menu"]),n=a("button",["menu__button","menu__button_continue"],"Continue");this.continueButton=n,n.addEventListener("click",()=>{n.classList.contains("menu__button_disabled")||this.parent.parent.continueGame()});const s=a("button",["menu__button","menu__button_new-game"],"New Game");s.addEventListener("click",()=>{this.parent.showNewGamePage()});const i=a("button",["menu__button","menu__button_random"],"Random");i.addEventListener("click",()=>{this.parent.state.newGameSettings.selectedDiff="random",this.parent.state.newGameSettings.selectedLevel="level_11",this.parent.parent.startNewGame("new")});const t=a("button",["menu__button","menu__button_settings"],"Settings");t.addEventListener("click",()=>{this.parent.showSettingsPage()});const r=a("button",["menu__button","menu__button_records"],"Records");return r.addEventListener("click",()=>{this.parent.showRecordsPage()}),e.append(n,s,i,t,r),this.node=e,this}checkAutoSave(){if(!JSON.parse(localStorage.getItem("40iqDataBase")).currentGameSave){this.continueButton.classList.add("menu__button_disabled");return}this.continueButton.classList.remove("menu__button_disabled")}}function B(o){const e=a("label",["difficulty__label",`difficulty__label_${o.diff}`]),n=a("input",["difficulty__input"],void 0,"radio",o.diff,"difficulty",o.checked),s=a("span",["input__span"]),i=a("span",["input__descripiton"],o.desc);return e.append(n,s,i),[e,n]}const R=[{name:"level_1",desc:"Chess",matrix:[[1,0,1,0,1],[0,1,0,1,0],[1,0,1,0,1],[0,1,0,1,0],[1,0,1,0,1]]},{name:"level_2",desc:"Face",matrix:[[1,1,1,1,1],[1,0,1,0,1],[1,1,1,1,1],[1,0,0,0,1],[1,1,1,1,1]]},{name:"level_3",desc:"Dog",matrix:[[0,0,0,1,0],[1,0,1,1,1],[0,1,1,1,0],[0,1,0,1,0],[0,1,0,1,0]]},{name:"level_4",desc:"Skull",matrix:[[0,1,1,1,0],[1,1,1,1,1],[1,0,1,0,1],[1,1,1,1,1],[0,1,1,1,0]]},{name:"level_5",desc:"Cross",matrix:[[0,0,1,0,0],[0,1,1,1,0],[0,0,1,0,0],[1,1,1,1,1],[0,0,1,0,0]]},{name:"level_6",desc:"Chicken",matrix:[[0,1,0,0,0],[1,1,0,1,1],[0,1,1,1,0],[0,1,1,1,0],[0,0,1,0,0]]},{name:"level_7",desc:"Carriage",matrix:[[0,1,1,0,0],[1,1,0,0,1],[1,1,1,1,0],[0,1,1,0,0],[1,0,0,1,0]]},{name:"level_8",desc:"Bomb",matrix:[[0,0,1,1,0],[0,1,0,0,1],[1,1,1,0,0],[1,0,1,0,0],[1,1,1,0,0]]},{name:"level_9",desc:"Hearth",matrix:[[0,1,0,1,0],[1,1,1,1,1],[1,1,1,1,1],[0,1,1,1,0],[0,0,1,0,0]]},{name:"level_10",desc:"Camel",matrix:[[0,1,0,0,0],[1,1,1,0,1],[1,1,1,1,0],[1,0,1,0,0],[1,0,1,0,0]]}],I=[{name:"level_1",desc:"Photo",matrix:[[0,0,0,0,0,1,1,1,1,0],[0,0,0,0,0,1,0,0,1,0],[0,1,0,1,1,1,1,0,1,0],[1,1,1,1,0,0,1,1,1,1],[1,0,0,1,1,1,1,1,0,1],[1,1,1,1,0,0,1,1,1,1],[1,1,1,0,1,1,0,1,1,1],[1,1,1,0,1,1,0,1,1,1],[1,1,1,1,0,0,1,1,1,1],[1,1,1,1,1,1,1,1,1,1]]},{name:"level_2",desc:"Copter",matrix:[[1,1,1,0,1,1,1,0,0,0],[0,0,0,1,0,0,0,0,0,0],[0,1,1,1,1,1,0,0,0,0],[1,1,0,1,1,1,1,0,0,1],[1,0,0,1,1,1,1,1,1,1],[1,0,0,1,1,1,1,1,0,1],[1,1,1,1,1,1,1,0,0,0],[0,1,1,1,1,1,0,0,0,0],[1,0,1,0,1,0,0,0,0,0],[1,1,1,1,1,1,1,0,0,0]]},{name:"level_3",desc:"Chick",matrix:[[0,0,1,1,1,0,0,0,0,0],[0,1,0,0,0,1,0,0,0,0],[0,1,0,1,0,1,0,0,0,0],[1,1,0,0,0,1,0,0,0,0],[0,1,0,0,0,1,1,1,1,1],[0,1,0,0,0,0,0,1,0,1],[0,1,0,0,0,1,1,1,0,1],[0,1,1,0,0,0,0,0,1,1],[0,0,1,1,1,1,1,1,1,0],[0,0,0,0,1,0,1,0,0,0]]},{name:"level_4",desc:"Cat",matrix:[[1,0,0,1,0,0,0,0,0,0],[1,1,1,1,0,0,0,0,0,0],[0,1,0,1,0,0,0,0,0,0],[1,1,1,1,0,0,0,0,1,1],[1,1,1,1,1,1,0,0,1,0],[0,1,1,1,1,1,1,0,1,0],[0,1,1,1,1,1,1,0,1,0],[0,1,1,1,1,1,1,0,1,0],[0,1,1,1,1,1,1,0,1,0],[0,1,1,1,1,1,1,1,1,0]]},{name:"level_5",desc:"Cocktail",matrix:[[0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,1,0,0],[1,1,1,1,1,1,1,1,1,1],[1,1,0,0,0,0,1,0,1,1],[0,1,1,0,0,1,0,1,1,1],[0,0,1,1,1,1,1,1,0,0],[0,0,0,0,1,1,0,0,0,0],[0,0,0,0,1,1,0,0,0,0],[0,0,0,0,1,1,0,0,0,0],[0,0,0,1,1,1,1,0,0,0]]},{name:"level_6",desc:"Leaf",matrix:[[0,0,0,0,0,1,1,1,1,1],[0,0,0,1,1,0,1,1,0,1],[0,0,1,1,1,0,1,0,1,1],[0,0,1,0,1,1,0,1,1,0],[0,1,1,0,1,0,1,0,1,0],[0,1,1,1,0,1,1,1,1,0],[0,1,1,0,1,0,0,1,0,0],[0,1,0,1,1,1,1,1,0,0],[1,1,1,1,1,1,0,0,0,0],[1,0,0,0,0,0,0,0,0,0]]},{name:"level_7",desc:"Worm",matrix:[[0,1,1,1,0,0,0,0,0,0],[1,0,1,0,1,0,0,0,0,0],[1,1,1,1,1,0,0,0,0,0],[1,1,0,1,0,0,0,0,0,0],[0,1,1,0,0,0,0,0,0,0],[0,1,1,0,0,0,0,0,0,0],[0,1,1,0,0,0,0,1,1,0],[0,1,1,1,0,1,1,1,1,1],[0,1,1,1,1,1,1,0,1,1],[0,0,1,1,1,1,0,0,0,0]]},{name:"level_8",desc:"40iq",matrix:[[1,0,1,0,1,1,1,0,1,1],[1,0,1,0,1,0,1,0,1,1],[1,1,1,0,1,0,1,0,1,1],[0,0,1,0,1,0,1,0,1,1],[1,0,1,0,1,1,1,0,1,1],[0,0,0,0,0,0,0,0,1,1],[1,0,0,0,0,0,0,1,1,1],[1,0,1,1,1,0,0,1,1,1],[1,0,1,0,1,0,0,1,1,1],[1,0,1,1,1,1,0,1,1,1]]},{name:"level_9",desc:"Anchor",matrix:[[0,0,0,0,1,1,0,0,0,0],[0,0,0,1,0,0,1,0,0,0],[0,0,0,1,0,0,1,0,0,0],[0,0,0,0,1,1,0,0,0,0],[0,1,0,0,1,1,0,0,1,0],[1,1,0,0,1,1,0,0,1,1],[1,1,0,0,1,1,0,1,1,1],[0,1,1,1,1,1,1,1,1,0],[0,0,1,1,1,1,1,1,0,0],[0,0,0,0,1,1,0,0,0,0]]},{name:"level_10",desc:"Tap",matrix:[[0,0,0,0,1,1,1,1,1,0],[0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,1,1,1,0,1],[0,0,1,1,1,1,1,1,1,1],[0,1,1,0,0,0,0,0,0,1],[0,1,0,0,1,1,1,1,1,1],[0,1,0,1,0,0,0,0,0,1],[0,1,1,1,0,0,0,0,0,0],[0,0,1,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1,1,1]]}],A=[{name:"level_1",desc:"Ram",matrix:[[0,0,0,0,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,1,0,0,0,1,0,0,0,0,0,0,0],[0,0,1,1,0,1,0,1,0,0,0,0,0,0,0],[0,0,1,1,0,1,1,0,0,0,0,0,0,0,0],[0,1,1,1,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,1,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,0,1,1,1,0,0,0,0,1,1,1,1],[0,0,0,0,0,1,0,0,0,0,0,0,1,0,1],[0,0,0,0,0,1,0,0,0,0,0,0,1,0,0],[0,0,0,0,0,1,0,0,0,0,0,0,1,0,0],[0,0,0,0,1,1,0,0,0,0,0,1,1,0,0]]},{name:"level_2",desc:"Dino",matrix:[[0,0,0,0,0,0,0,0,0,0,0,0,1,1,0],[0,0,0,1,1,0,0,0,0,0,0,1,1,1,1],[0,0,1,1,0,0,0,0,0,0,0,1,1,1,1],[0,1,1,0,0,0,0,0,0,0,0,1,1,0,0],[1,1,0,0,0,0,0,0,0,0,0,1,1,1,0],[1,1,0,0,0,0,0,0,0,0,0,0,1,1,0],[1,1,0,0,0,0,1,1,1,1,0,0,1,1,0],[1,1,0,0,0,1,1,1,1,1,1,0,1,1,0],[1,1,1,0,1,1,1,1,1,1,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,0,0,0],[1,1,1,0,0,0,0,0,0,0,1,1,0,0,0],[1,1,0,0,0,0,0,0,0,0,1,1,1,0,0]]},{name:"level_3",desc:"Ship",matrix:[[0,0,0,0,0,0,0,1,1,0,0,1,1,0,0],[0,0,0,0,0,0,0,1,0,0,0,1,0,1,1],[0,0,0,0,0,1,1,1,1,1,0,1,0,0,0],[0,0,0,0,1,1,1,1,1,1,0,1,1,1,0],[0,0,0,0,1,1,1,1,1,1,0,1,1,1,0],[0,0,0,0,0,0,0,1,0,0,0,1,1,1,0],[0,0,0,0,1,1,1,1,1,1,0,1,1,1,1],[0,0,0,1,1,1,1,1,1,1,0,1,1,1,1],[0,0,0,1,1,1,1,1,1,1,0,1,1,1,1],[0,0,0,1,1,1,1,1,1,1,0,1,1,1,1],[0,0,0,0,0,0,0,1,0,0,0,1,0,0,0],[1,1,1,1,1,0,0,1,0,0,0,1,0,1,1],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,1,1,1,1,1,1,1,1,1,0,0]]},{name:"level_4",desc:"Octopus",matrix:[[0,0,0,1,1,1,0,0,0,0,0,0,0,0,0],[0,0,1,1,1,1,1,0,0,0,0,0,1,1,1],[0,0,1,1,1,1,1,0,0,0,0,0,0,0,1],[0,0,1,1,1,1,1,0,0,0,0,1,1,1,1],[1,0,1,0,1,0,1,0,1,1,1,1,0,0,0],[1,0,0,1,1,1,0,0,1,0,0,0,0,0,0],[1,1,1,1,1,1,1,1,1,1,0,0,1,1,1],[0,1,1,1,1,1,1,1,0,1,1,1,1,0,0],[1,1,1,1,1,1,1,1,1,0,0,0,0,0,0],[1,0,1,1,1,1,1,0,1,1,1,1,0,0,1],[1,0,1,0,1,0,1,1,0,0,0,1,1,0,1],[1,0,1,0,1,1,0,1,1,0,0,0,1,1,1],[1,0,1,1,0,1,0,0,1,1,1,0,0,0,0],[1,1,0,1,0,1,1,1,0,0,1,1,1,1,0],[0,1,0,1,0,0,0,1,1,1,0,0,0,1,1]]},{name:"level_5",desc:"Penguin",matrix:[[0,0,0,0,0,1,1,1,1,1,1,0,0,0,0],[0,0,0,0,1,0,1,0,0,0,1,1,0,0,0],[0,0,0,1,0,0,0,0,0,0,1,1,1,0,0],[0,0,0,1,0,1,0,0,1,0,1,1,1,1,0],[0,0,0,1,0,0,0,0,0,0,1,1,1,1,0],[0,0,0,0,1,0,0,0,1,1,1,1,1,1,0],[0,0,1,1,1,1,1,1,0,0,0,1,1,1,0],[0,1,0,0,0,0,0,0,0,1,0,1,1,1,0],[1,0,0,1,1,1,1,1,1,0,1,0,1,1,0],[1,0,1,1,0,0,0,0,0,1,0,0,1,1,1],[0,1,0,0,1,1,1,1,1,0,0,0,1,1,1],[0,0,0,0,0,1,0,0,0,0,0,0,1,1,1],[0,0,0,1,1,1,0,0,0,0,0,0,0,1,1],[0,0,1,1,1,0,0,0,0,0,0,0,0,1,1],[0,1,1,1,0,0,0,0,0,0,0,0,0,1,1]]},{name:"level_6",desc:"Cherry",matrix:[[0,0,1,1,1,1,1,1,0,0,0,0,1,1,1],[0,0,0,0,1,1,1,1,1,0,1,1,1,1,0],[0,0,0,0,0,1,1,1,1,1,1,1,0,0,0],[0,0,1,1,1,1,0,0,1,1,1,1,1,0,0],[0,1,0,0,1,0,1,1,1,0,1,0,1,0,0],[0,1,1,1,0,1,1,1,0,0,1,1,0,1,0],[0,1,1,0,1,1,0,1,1,0,0,1,1,1,0],[0,1,0,1,1,0,0,0,1,0,0,0,0,1,0],[0,0,0,1,0,0,0,0,1,1,1,1,0,0,0],[0,1,1,1,1,0,0,1,1,1,1,0,1,0,0],[1,1,1,1,0,1,0,1,1,1,1,0,1,0,0],[1,1,1,1,0,1,0,1,1,1,1,0,1,0,0],[1,1,1,0,1,1,0,1,1,1,0,1,1,0,0],[1,1,1,1,1,1,0,0,1,1,1,1,0,0,0],[0,1,1,1,1,0,0,0,0,0,0,0,0,0,0]]},{name:"level_7",desc:"Bull",matrix:[[0,0,1,1,1,1,1,0,0,1,1,1,1,0,0],[0,1,1,0,0,1,0,0,0,0,1,0,1,1,0],[1,1,0,1,1,0,0,0,0,0,0,1,0,1,1],[1,0,0,1,0,0,1,1,1,0,1,1,0,0,1],[1,1,0,0,1,1,1,1,0,1,1,0,0,1,1],[0,1,1,0,1,0,1,0,1,0,1,1,1,1,0],[0,1,1,1,0,0,0,0,0,0,0,1,1,0,0],[1,1,1,0,1,1,0,0,0,0,1,1,0,1,0],[1,0,0,0,1,1,1,0,0,1,1,1,0,0,1],[0,0,1,0,0,0,1,0,0,1,0,1,1,0,1],[1,1,1,1,0,0,1,0,0,1,0,1,0,1,1],[1,1,1,1,0,1,0,1,1,0,1,1,0,0,0],[1,1,1,0,1,0,1,1,1,1,1,0,0,0,0],[1,1,1,0,1,1,0,0,0,1,1,0,0,0,0],[1,1,0,0,0,1,1,1,1,1,0,0,0,0,0]]},{name:"level_8",desc:"Peasant",matrix:[[1,0,1,0,1,0,0,0,1,1,1,1,1,0,0],[1,0,1,0,1,0,0,1,1,1,1,1,1,1,0],[1,0,1,0,1,0,0,1,0,0,0,1,1,1,0],[1,0,1,0,1,0,0,1,1,0,1,0,1,1,0],[1,1,0,1,1,0,0,1,0,0,0,0,0,1,0],[0,1,1,1,0,0,0,0,1,0,0,0,1,0,0],[0,0,1,0,0,0,0,0,0,1,1,1,1,0,0],[0,0,1,0,0,0,0,0,1,0,0,0,1,1,0],[0,0,1,0,0,0,1,1,1,0,0,0,0,1,0],[0,1,0,1,1,1,0,0,1,0,0,0,1,0,1],[0,1,0,1,0,0,1,1,1,0,0,0,1,0,1],[0,0,1,1,1,1,0,0,1,0,0,0,1,0,1],[0,0,1,0,0,0,0,0,0,1,1,1,1,1,1],[0,0,1,0,0,0,0,0,0,1,1,1,1,0,1],[0,0,1,0,0,0,0,0,0,1,1,1,1,1,0]]},{name:"level_9",desc:"Lemur",matrix:[[0,0,0,0,0,0,0,0,0,0,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,1,1,0,0,1],[0,0,0,0,0,0,0,1,1,1,1,1,0,0,1],[0,0,0,0,0,1,1,1,1,1,0,0,1,1,0],[0,0,0,0,1,1,1,1,1,0,0,0,0,1,0],[1,1,1,0,1,1,1,0,1,0,1,1,1,0,1],[1,1,1,1,1,0,0,0,0,0,1,0,1,0,1],[1,0,1,1,0,0,1,1,1,0,1,1,1,0,1],[1,0,0,1,0,0,1,0,1,0,0,0,0,0,1],[1,0,0,0,1,0,1,1,1,0,0,1,0,1,0],[0,1,1,1,1,0,0,0,0,0,1,1,0,1,0],[0,0,0,0,0,1,0,1,1,0,0,0,1,1,0],[0,0,0,0,0,1,1,0,0,1,1,1,1,0,0],[0,0,0,1,1,1,1,0,0,0,0,0,1,1,0],[0,0,1,1,1,1,1,1,0,0,0,0,0,1,0]]},{name:"level_10",desc:"Like",matrix:[[0,0,0,1,1,1,1,1,1,1,0,0,1,1,1],[0,0,0,0,1,1,1,1,1,0,0,0,1,1,1],[0,0,0,0,0,1,1,1,0,0,0,1,1,1,1],[0,0,0,0,1,0,1,1,0,0,1,1,1,1,1],[0,0,0,1,1,0,1,0,0,0,1,1,1,1,1],[0,0,0,1,0,1,0,0,0,0,0,0,0,0,1],[0,0,0,1,0,1,0,0,0,0,0,1,1,0,0],[0,0,0,1,0,1,1,0,0,0,1,0,1,1,0],[1,0,0,1,0,0,1,0,0,1,1,0,0,0,0],[1,1,0,0,1,0,1,1,0,1,0,1,1,1,1],[1,1,1,0,1,0,0,0,0,1,0,0,0,0,0],[1,1,1,1,0,1,0,0,1,1,1,1,1,1,1],[1,1,1,1,1,1,0,0,1,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,0,0,0,0,1,1,1]]}],S={easy:R,medium:I,hard:A};class H{constructor(e){this.parent=e,this.newGameState=this.parent.state.newGameSettings,this.node,this.templates=S,this.levelInputs=[],this.difficultyInputs=[],this.renderNewGameLayout()}renderNewGameLayout(){const e=a("div",["new-game"]),n=a("h3",["new-game__title"],"New Game"),s=a("div",["new-game__difficulty"]);[{diff:"easy",checked:!0,desc:"Easy - 5 x 5"},{diff:"medium",checked:void 0,desc:"Medium - 10 x 10"},{diff:"hard",checked:void 0,desc:"Hard - 15 x 15"},{diff:"random",checked:void 0,desc:"Random"}].forEach(l=>{const m=B(l);s.append(m[0]),this.difficultyInputs.push(m[1])});const t=a("div",["new-game__level"]);t.addEventListener("click",l=>{const m=l.target;m.classList.contains("level__input")&&(this.newGameState.selectedLevel=m.id)});for(let l=1;l<=L+1;l+=1){const m=l===L+1?!0:void 0,d=a("label",["level__label",`level__label_${l}`]),p=a("input",["level__input"],void 0,"radio",`level_${l}`,"level",m);if(l===L+1)d.textContent="Random";else{const g=this.templates.easy[l-1].desc;d.textContent=g}d.append(p),t.append(d),this.levelInputs.push(d)}const r=a("div",["new-game__buttons-container"]),c=a("button",["new-game__button","new-game__button_return"],"Back");c.addEventListener("click",()=>{this.parent.showMainMenuPage()});const u=a("button",["new-game__button","new-game__button_return"],"Play!");return u.addEventListener("click",()=>{this.parent.parent.startNewGame()}),r.append(c,u),e.append(n,s,t,r),s.addEventListener("click",l=>{const m=l.target;if(m.classList.contains("difficulty__input")){this.newGameState.selectedDiff=m.id;const d=t.childNodes;let p=S.easy;switch(m.id){case"medium":p=S.medium;break;case"hard":p=S.hard;break;case"random":this.newGameState.selectedLevel="random";break}for(let g=0;g<d.length-1;g+=1)d[g].childNodes[0].textContent=p[g].desc}}),this.node=e,this}resetSettings(){this.levelInputs[this.levelInputs.length-1].click(),this.difficultyInputs[0].click()}}function V(o){const e=o[0].length,n=o.length,s=[];for(let i=0;i<n;i+=1)for(let t=0;t<e;t+=1)o[i][t]===1&&s.push([i,t]);return s}function j(){switch(Math.floor(Math.random()*3)){case 0:return"easy";case 1:return"medium";default:return"hard"}}function q(o,e){return o=Math.ceil(o),e=Math.floor(e),`level_${Math.floor(Math.random()*(e-o+1)+o)}`}function $(o){(o.selectedDiff==="random"||o.selectedLevel==="level_11")&&(o.selectedLevel=q(1,10)),o.selectedDiff==="random"&&(o.selectedDiff=j())}class J{constructor(e){this.DOMcontroller=e,this.node,this.renderRecordsPage()}renderRecordsPage(){const e=a("div",["records"]),n=a("h3",["records__title"],"Records"),s=a("div",["records__list-container"]),i=a("button",["records__button"],"Back");return i.addEventListener("click",()=>{this.DOMcontroller.showMainMenuPage()}),e.append(n,s,i),this.recordsList=s,this.node=e,this}updateRecords(){this.recordsList.innerHTML="";const e=JSON.parse(localStorage.getItem("40iqDataBase")).gamesHistory;if(e.length===0){this.recordsList.textContent="Sorry, there's no solved nonograms yet :(";return}e.sort((u,l)=>new Date(`1970-01-01T${u.currentTimerValue}:00`)-new Date(`1970-01-01T${l.currentTimerValue}:00`));let n=1;const s=a("div",["records__item-container"]),i=a("span",["records__item","records__item_index"],"Index"),t=a("span",["records__item","records__item_nonogram"],"Nonogram"),r=a("span",["records__item","records__item_difficulty"],"Difficulty"),c=a("span",["records__item","records__item_time"],"time");s.append(i,t,r,c),this.recordsList.append(s),e.forEach(u=>{const l=a("div",["records__item-container"]),m=a("span",["records__item","records__item_index"],`${n}`),d=a("span",["records__item","records__item_nonogram"],`${u.selectedDesc}`),p=a("span",["records__item","records__item_difficulty"],`${u.selectedDiff}`),g=a("span",["records__item","records__item_time"],`${u.currentTimerValue}`);l.append(m,d,p,g),this.recordsList.append(l),n+=1})}}class U{constructor(e){this.DOMcontroller=e,this.node,this.renderSettingsPage()}renderSettingsPage(){const e=a("div",["settings-page"]),n=a("h3",["settings-page__title"],"Settings"),s=a("div",["settings-container"]),i=a("div",["settings","settings_music"]),t=a("label",["settings__label","settings__label_music"],"Background music"),r=a("input",["switch","switch_music"],void 0,"checkbox","music"),c=a("input",["volume","volume_music"],void 0,"range","music-volume");c.min="0",c.max="100",c.value="15",this.musicSwitch=r,this.musicVolume=c,c.addEventListener("click",()=>{this.DOMcontroller.parent.audio.bgMusic.volume=Number(c.value)/100}),r.addEventListener("click",()=>{if(r.checked){this.DOMcontroller.parent.audio.playBackgroundMusic(),this.DOMcontroller.parent.audio.bgMusic.volume=Number(c.value)/100;return}this.DOMcontroller.parent.audio.bgMusic.volume=0}),t.append(r),i.append(t,c);const u=a("div",["settings","settings_sound"]),l=a("label",["settings__label","settings__label_sound"],"Sound effects"),m=a("input",["switch","switch_sound"],void 0,"checkbox","sound");m.checked=!0;const d=a("input",["volume","volume_sound"],void 0,"range","sound-volume");d.min="0",d.max="100",d.value="15",this.soundSwitch=m,this.soundVolume=d,c.addEventListener("click",()=>{this.DOMcontroller.parent.audio.winSound.volume=Number(d.value)/100,this.DOMcontroller.parent.audio.paintSound.volume=Number(d.value)/100,this.DOMcontroller.parent.audio.unpaintSound.volume=Number(d.value)/100,this.DOMcontroller.parent.audio.crossSound.volume=Number(d.value)/100}),m.addEventListener("click",()=>{if(m.checked){this.DOMcontroller.parent.audio.winSound.volume=Number(d.value)/100,this.DOMcontroller.parent.audio.paintSound.volume=Number(d.value)/100,this.DOMcontroller.parent.audio.unpaintSound.volume=Number(d.value)/100,this.DOMcontroller.parent.audio.crossSound.volume=Number(d.value)/100;return}this.DOMcontroller.parent.audio.winSound.volume=0,this.DOMcontroller.parent.audio.paintSound.volume=0,this.DOMcontroller.parent.audio.unpaintSound.volume=0,this.DOMcontroller.parent.audio.crossSound.volume=0}),l.append(m),u.append(l,d);const p=a("div",["settings","settings_theme"]),g=a("label",["settings__label","settings__label_theme"],"Night mode"),f=a("input",["switch","switch_theme"],void 0,"checkbox","theme");this.themeSwitch=f,f.addEventListener("click",()=>{this.DOMcontroller.changeTheme()}),g.append(f),p.append(g);const _=a("button",["settings__button"],"Back to Menu");return _.addEventListener("click",()=>{this.DOMcontroller.showMainMenuPage()}),s.append(i,u,p),e.append(n,s,_),this.node=e,this}}class F{constructor(e){this.parent=e,this.state=e.appState,this.viewState="menu",this.root=document.querySelector(".body"),this.renderBaseStructure(),this.recordsPage=new J(this),this.mainPage=new E(this),this.newGamePage=new H(this),this.gamePage=new x(this),this.settingsPage=new U(this)}renderBaseStructure(){return this.root.innerHTML=G,this.mainRoot=document.querySelector(".main__container"),this.mainRoot.addEventListener("contextmenu",e=>{e.preventDefault()}),this}showRecordsPage(){this.mainRoot.childNodes.forEach(e=>{this.mainRoot.removeChild(e)}),this.recordsPage.updateRecords(),this.mainRoot.append(this.recordsPage.node)}showSettingsPage(){this.mainRoot.childNodes.forEach(e=>{this.mainRoot.removeChild(e)}),this.mainRoot.append(this.settingsPage.node)}showMainMenuPage(){this.mainRoot.childNodes.forEach(e=>{this.mainRoot.removeChild(e)}),this.mainRoot.append(this.mainPage.node),this.mainPage.checkAutoSave()}showNewGamePage(){this.mainRoot.childNodes.forEach(e=>{this.mainRoot.removeChild(e)}),this.mainRoot.append(this.newGamePage.node)}showGamePage(e="new"){if(this.mainRoot.childNodes.forEach(n=>{this.mainRoot.removeChild(n)}),e==="new"){$(this.state.newGameSettings);let n=this.state.newGameSettings.selectedDiff,s=this.state.newGameSettings.selectedLevel;this.state.newGameSettings.selectedDesc=S[n][Number(s.slice(6,s.length))-1].desc,this.state.newGameSettings.selectedMatrix=S[n][Number(s.slice(6,s.length))-1].matrix,this.state.currentGameState=Object.assign({},this.state.newGameSettings),this.state.currentGameState.cellsToPaint=V(this.state.currentGameState.selectedMatrix),this.state.currentGameState.paintedCells=[],this.state.currentGameState.crossedCells=[]}else this.state.currentGameState=JSON.parse(localStorage.getItem("40iqDataBase")).currentGameSave;this.mainRoot.append(this.gamePage.node),this.gamePage.createCells(this.state.currentGameState.selectedDiff),this.cleanCells(),this.gamePage.updateHints(this.state.currentGameState.selectedMatrix),this.gamePage.timer.stopTimer(),this.gamePage.timer.timerNode.textContent="00:00",e==="load"&&(this.gamePage.timer.loadTimer(),this.loadFilledCells()),this.newGamePage.resetSettings()}loadFilledCells(){const e=this.gamePage.cellsContainer,n=this.state.currentGameState.crossedCells,s=this.state.currentGameState.paintedCells;e.childNodes.forEach(i=>{i.childNodes.forEach(t=>{const r=Number(t.getAttribute("data-row")),c=Number(t.getAttribute("data-col"));s.some(u=>{if(u[0]===r&&u[1]===c)return!0})&&t.classList.add("painted"),n.some(u=>{if(u[0]===r&&u[1]===c)return!0})&&t.classList.add("crossed")})})}cleanCells(){this.gamePage.cellsContainer.childNodes.forEach(n=>{n.childNodes.forEach(s=>{s.classList.remove("painted"),s.classList.remove("crossed")})})}resetGameProgress(){this.cleanCells(),this.gamePage.timer.stopTimer(),this.gamePage.timer.timerNode.textContent="00:00",this.gamePage.timer.currentValue="00:00",this.state.currentGameState.currentTimerValue="00:00",this.state.currentGameState.paintedCells=[],this.state.currentGameState.crossedCells=[]}showSolution(){this.state.currentGameState.isGameOver=!0,this.gamePage.timer.stopTimer(),this.state.currentGameState.gameResult="solution",this.cleanCells();const e=this.gamePage.cellsContainer,n=this.state.currentGameState.cellsToPaint;e.childNodes.forEach(s=>{s.childNodes.forEach(i=>{const t=Number(i.getAttribute("data-row")),r=Number(i.getAttribute("data-col"));n.some(c=>{if(c[0]===t&&c[1]===r)return!0})&&i.classList.add("painted")})}),this.showModal()}showModal(){const e=this.gamePage.modal.node,n=this.gamePage.modal.nonogramDescriptionNode,s=this.gamePage.modal.timeDescriptionNode,i=this.gamePage.modal.TitleNode;s.textContent=this.state.currentGameState.currentTimerValue?this.state.currentGameState.currentTimerValue:"00:00",n.textContent=this.state.currentGameState.selectedDesc,i.textContent="Great!",e.classList.add("modal_active"),this.state.currentGameState.gameResult&&(i.textContent="Solution!")}changeTheme(){this.root.classList.toggle("night-mode")}}const W="/nonograms/nonograms/assets/bg-music-6TUHFf-K.mp3",K="/nonograms/nonograms/assets/bg-win-8ygfU-cj.mp3",z="/nonograms/nonograms/assets/cross-GjynAhGw.mp3",Q="/nonograms/nonograms/assets/paint-FnPkMQ4A.mp3",X="/nonograms/nonograms/assets/unpaint-cBgFTgzH.mp3";class Y{constructor(e){this.DOMcontroller=e,this.initAudio()}initAudio(){const e=a("div",["audio-container"]),n=a("audio",["audio","audio_background"]);n.src=W,n.preload="metadata",n.loop=!0,n.muted=!0,this.bgMusic=n;const s=a("audio",["audio","audio_win"]);s.src=K,s.preload="metadata",this.winSound=s;const i=a("audio",["audio","audio_paint"]);i.src=Q,i.preload="metadata",this.paintSound=i;const t=a("audio",["audio","audio_unpaint"]);t.src=X,t.preload="metadata",this.unpaintSound=t;const r=a("audio",["audio","audio_cross"]);return r.src=z,r.preload="metadata",this.crossSound=r,e.append(n,s,i,t,r),document.querySelector("body").append(e),this}playBackgroundMusic(){this.bgMusic.muted=!1,this.bgMusic.play()}playWinSound(){this.paintSound.volume!==0&&(this.winSound.currentTime=0,this.winSound.play())}playPaintSound(){this.paintSound.volume!==0&&(this.paintSound.pause(),this.paintSound.currentTime=.1,this.paintSound.play())}playUnpaintSound(){this.paintSound.volume!==0&&(this.unpaintSound.pause(),this.unpaintSound.currentTime=0,this.unpaintSound.play())}playCrossSound(){this.paintSound.volume!==0&&(this.crossSound.pause(),this.crossSound.currentTime=.1,this.crossSound.play())}}class Z{constructor(){this.appState={newGameSettings:Object.assign({},y)},this.DOMcontroller=new F(this),this.audio=new Y(this.DOMcontroller)}changeView(){this.DOMcontroller.showMainMenuPage()}startNewGame(){this.DOMcontroller.showGamePage("new")}gameOver(){this.appState.currentGameState.isGameOver||(this.audio.winSound.play(),this.appState.currentGameState.isGameOver=!0,this.DOMcontroller.showModal(),this.updateHistory())}autoSave(){const e=JSON.parse(localStorage.getItem("40iqDataBase"));e.currentGameSave=this.appState.currentGameState,localStorage.setItem("40iqDataBase",JSON.stringify(e))}continueGame(){this.DOMcontroller.showGamePage("load")}updateHistory(){const e=JSON.parse(localStorage.getItem("40iqDataBase"));e.gamesHistory.push(this.appState.currentGameState),e.gamesHistory.length===6&&e.gamesHistory.shift(),localStorage.setItem("40iqDataBase",JSON.stringify(e))}}const ee=JSON.parse(localStorage.getItem("40iqDataBase"));ee||localStorage.setItem("40iqDataBase",JSON.stringify({currentGameSave:void 0,gamesHistory:[]}));const te=new Z;te.startNewGame();
